<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Open-Sessame Framework: Tutorial Answers Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Open-Sessame Framework
   &#160;<span id="projectnumber">v1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('TutorialAnswersPage.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Tutorial Answers Page </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="index.html#TableOfContents">Table of Contents</a> : <a class="el" href="IntroductionPage.html">Introduction to the Open-Sessame Framework</a> : <a class="el" href="TutorialsPage.html">Tutorials</a></p>
<h1><a class="anchor" id="RotationTutorialAnswer"></a>
Rotation Tutorial Answer</h1>
<div class="fragment"><div class="line"><span class="comment">// Create a Quaternion that has the initial parameters (0.5,0.5,0.5,0.5).</span></div>
<div class="line">Quaternion myQuat(0.5, 0.5, 0.5, 0.5);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Output this quaternion to the console in both quaternion and MRP form</span></div>
<div class="line">cout &lt;&lt; myQuat;</div>
<div class="line">cout &lt;&lt; myQuat.GetMRP();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create a Direction Cosine Matrix corresponding to a 321 rotation with angles: 10, -30, 150 degrees.</span></div>
<div class="line">DirectionCosineMatrix myDCM(10*RPD, -30*RPD, 150*RPD, 321);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create 2 &quot;Rotation&quot;s that are intialized by the quaternion and Direction Cosine Matrix.</span></div>
<div class="line">Rotation myRot1(myQuat);</div>
<div class="line">Rotation myRot2(myDCM);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Determine the successive rotation of these two rotations and output to the console in DCM form.</span></div>
<div class="line">cout &lt;&lt; (myRot1 * myRot2).GetDCM();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Verify that the answer you got was the correct (expected) one. </span></div>
<div class="line"><a class="code" href="namespaceO__SESSAME.html#afd193cad95b9cf8e3be40032e29aeb48">Matrix</a> Answer(3,3);</div>
<div class="ttc" id="anamespaceO__SESSAME_html_afd193cad95b9cf8e3be40032e29aeb48"><div class="ttname"><a href="namespaceO__SESSAME.html#afd193cad95b9cf8e3be40032e29aeb48">O_SESSAME::Matrix</a></div><div class="ttdeci">CAMdoubleMatrix Matrix</div><div class="ttdef"><b>Definition:</b> <a href="Matrix_8h_source.html#l00026">Matrix.h:26</a></div></div>
</div><!-- fragment --><p>Back to: <a class="el" href="TutorialsPage.html#RotationTutorials">Rotation Tutorials</a> </p><hr  />
<h1><a class="anchor" id="UtilityTutorialAnswer"></a>
Utility Tutorial Answer</h1>
<ol type="1">
<li>Create an ssfTime object, set the epoch to the current real time, and the stored 'current' time to 50 seconds later. Output both of these in DateTime and JulianDate format to the console. <div class="fragment"><div class="line">ssfTime myTime;</div>
<div class="line">myTime.SetEpoch(Now());</div>
<div class="line">myTime.Set(myTime.GetEpoch() + 50);</div>
<div class="line">cout &lt;&lt; myTime.GetDateTime().tm_mon &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; myTime.GetDateTime().tm_mday &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; myTime.GetDateTime().tm_year &lt;&lt; std::endl;</div>
<div class="line">cout &lt;&lt; myTime.GetJulianDate() &lt;&lt; std::endl;</div>
</div><!-- fragment --></li>
<li>Plot a Matrix of values corresponding to the <img class="formulaInl" alt="$ f(x)=\sin{x}$" src="form_157.png"/> for <img class="formulaInl" alt="$x=0:2\pi $" src="form_158.png"/> using the Open-Sessame GnuPlot interface. <div class="fragment"><div class="line"><span class="keywordtype">int</span> stepsize = 0.1;</div>
<div class="line"><a class="code" href="namespaceO__SESSAME.html#afd193cad95b9cf8e3be40032e29aeb48">Matrix</a> datavec(2*M_PI / stepsize,2);</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> jj = 1; jj &lt;= datavec[<a class="code" href="namespaceO__SESSAME.html#a46c00688d4751db618aff3080a4212fd">MatrixRowsIndex</a>].getIndexBound();  ++jj)</div>
<div class="line">{</div>
<div class="line">    datavec(jj,1) = jj * stepsize;</div>
<div class="line">    datavec(jj,2) = sin(jj * stepsize);</div>
<div class="line">}</div>
<div class="line"><a class="code" href="namespaceO__SESSAME.html#acab87ab6b34e275d62fc7b0fe121826a">Plot2D</a>(datavec);</div>
<div class="ttc" id="anamespaceO__SESSAME_html_a46c00688d4751db618aff3080a4212fd"><div class="ttname"><a href="namespaceO__SESSAME.html#a46c00688d4751db618aff3080a4212fd">O_SESSAME::MatrixRowsIndex</a></div><div class="ttdeci">const int MatrixRowsIndex</div><div class="ttdef"><b>Definition:</b> <a href="Matrix_8h_source.html#l00024">Matrix.h:24</a></div></div>
<div class="ttc" id="anamespaceO__SESSAME_html_acab87ab6b34e275d62fc7b0fe121826a"><div class="ttname"><a href="namespaceO__SESSAME.html#acab87ab6b34e275d62fc7b0fe121826a">O_SESSAME::Plot2D</a></div><div class="ttdeci">static void Plot2D(const Matrix &amp;_data)</div><div class="ttdoc">Use GnuPlot to plot the data in a matrix.</div><div class="ttdef"><b>Definition:</b> <a href="Plot_8h_source.html#l00051">Plot.h:51</a></div></div>
</div><!-- fragment --></li>
<li>Create a linear interpolation of the <img class="formulaInl" alt="$\sin{}$" src="form_159.png"/> function using a step-size of 0.1 <div class="fragment"><div class="line"><span class="keywordtype">int</span> stepsize = 0.1;</div>
<div class="line"><a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> timeVec(2*M_PI / stepsize);</div>
<div class="line"><a class="code" href="namespaceO__SESSAME.html#afd193cad95b9cf8e3be40032e29aeb48">Matrix</a> dataMat(timeVec[<a class="code" href="namespaceO__SESSAME.html#a46c00688d4751db618aff3080a4212fd">MatrixRowsIndex</a>].getIndexBound(), 1);</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> jj = 1; jj &lt; timeVec[<a class="code" href="namespaceO__SESSAME.html#a46c00688d4751db618aff3080a4212fd">MatrixRowsIndex</a>].getIndexBound();  ++jj)</div>
<div class="line">{</div>
<div class="line">    timeVec(jj) = jj * stepsize;</div>
<div class="line">    dataMat(jj,1) = sin(jj * stepsize);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">LinearInterpolator interp(timeVec,dataMat);</div>
<div class="line"><a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> chk = interp.Evaluate(0.25);</div>
<div class="line">cout &lt;&lt;  timevec &lt;&lt; std::endl &lt;&lt; datavec &lt;&lt; std::endl &lt;&lt; sin(0.25) &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; chk &lt;&lt; std::endl;</div>
<div class="ttc" id="anamespaceO__SESSAME_html_aa5cbaab43220a5b5e4dcfecb6d6644f6"><div class="ttname"><a href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">O_SESSAME::Vector</a></div><div class="ttdeci">CAMdoubleVector Vector</div><div class="ttdef"><b>Definition:</b> <a href="Matrix_8h_source.html#l00027">Matrix.h:27</a></div></div>
</div><!-- fragment --> Back to: <a class="el" href="TutorialsPage.html#UtilityTutorials">Utility Tutorials</a> <hr  />
</li>
</ol>
<h1><a class="anchor" id="AttitudeTutorialAnswer"></a>
Attitude Tutorial Answer</h1>
<ol type="1">
<li>Create an AttitudeState object instance that is initialized to an aligned rotation in the Orbit-Inertial Frame (attitudeframe not yet implemented fully). <div class="fragment"><div class="line">AttitudeState myAttState(Rotation(), <span class="keyword">new</span> AttitudeFrameOI);</div>
</div><!-- fragment --></li>
<li>Integrate an attitude for 50 seconds using the following conditions:</li>
</ol>
<p>First setup the kinematics equation: </p><div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> <a class="code" href="brett__test_8cpp.html#a49401ae49d5dbc64f0cb6dee4e832c90">AttituteDynamics</a>(<span class="keyword">const</span> ssfTime &amp;_time, <span class="keyword">const</span> <a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a>&amp; _integratingState, Orbit *_pOrbit, Attitude *_pAttitude, <span class="keyword">const</span> <a class="code" href="namespaceO__SESSAME.html#afd193cad95b9cf8e3be40032e29aeb48">Matrix</a> &amp;_parameters, <span class="keyword">const</span> Functor &amp;_forceFunctorPtr)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Initialize the vectors used in the calculation.</span></div>
<div class="line">    <span class="comment">//  made static, which causes the memory to be allocated the first time the function is called</span></div>
<div class="line">    <span class="comment">//  and then left in memory during the program to speed up computation.</span></div>
<div class="line">    <span class="keyword">static</span> <a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> stateDot(7);</div>
<div class="line">    <span class="keyword">static</span> <a class="code" href="namespaceO__SESSAME.html#afd193cad95b9cf8e3be40032e29aeb48">Matrix</a> bMOI(3,3); </div>
<div class="line">    <span class="keyword">static</span> <a class="code" href="namespaceO__SESSAME.html#afd193cad95b9cf8e3be40032e29aeb48">Matrix</a> qtemp(4,3); </div>
<div class="line">    <span class="keyword">static</span> <a class="code" href="namespaceO__SESSAME.html#afd193cad95b9cf8e3be40032e29aeb48">Matrix</a> Tmoment(3,1);</div>
<div class="line">    <span class="keyword">static</span> <a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> qIn(4); </div>
<div class="line">    <span class="keyword">static</span> <a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> wIn(3);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Retrieve the current integration states to a quaternion and angular velocity vector</span></div>
<div class="line">    qIn = _integratingState(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>,<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a> + 3));</div>
<div class="line">    wIn = _integratingState(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a> + 4,<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a> + 6));</div>
<div class="line">    qIn /= <a class="code" href="namespaceO__SESSAME.html#a39124db042647a87f5c41ce772a502e6">norm2</a>(qIn);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Calculate qDot</span></div>
<div class="line">    qtemp(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+0,<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+2),<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+0,<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+2)) = <a class="code" href="namespaceO__SESSAME.html#a000a63f4c94249e5ffeb5adb102de817">skew</a>(qIn(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+0,<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+2))) + qIn(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+3) * <a class="code" href="namespaceO__SESSAME.html#abb55bd515fcc4eba59bad6cccc6707eb">eye</a>(3);</div>
<div class="line">    qtemp(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+3, <a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+0,<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+2)) = -(~qIn(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+0,<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+2)));</div>
<div class="line">    qtemp(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>,<a class="code" href="namespaceO__SESSAME.html#aa03fb4f40ef9d7154a59fc366e35c768">MatrixIndexBase</a>) = 0.5 * qtemp * wIn;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Get the moments of inertia and calculate the omegaDot</span></div>
<div class="line">    bMOI = _parameters(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a class="code" href="namespaceO__SESSAME.html#aa03fb4f40ef9d7154a59fc366e35c768">MatrixIndexBase</a>+0,<a class="code" href="namespaceO__SESSAME.html#aa03fb4f40ef9d7154a59fc366e35c768">MatrixIndexBase</a>+2),<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a class="code" href="namespaceO__SESSAME.html#aa03fb4f40ef9d7154a59fc366e35c768">MatrixIndexBase</a>+0,<a class="code" href="namespaceO__SESSAME.html#aa03fb4f40ef9d7154a59fc366e35c768">MatrixIndexBase</a>+2));</div>
<div class="line">    Tmoment = (bMOI.inverse() * (Tmoment - <a class="code" href="namespaceO__SESSAME.html#a000a63f4c94249e5ffeb5adb102de817">skew</a>(wIn) * (bMOI * wIn)));</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Combine the qDot and omegaDot into a stateDot vector</span></div>
<div class="line">    stateDot(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>,<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a> + 3)) = qtemp(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>,<a class="code" href="namespaceO__SESSAME.html#aa03fb4f40ef9d7154a59fc366e35c768">MatrixIndexBase</a>);</div>
<div class="line">    stateDot(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a> + 4,<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a> + 6)) = Tmoment(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>,<a class="code" href="namespaceO__SESSAME.html#aa03fb4f40ef9d7154a59fc366e35c768">MatrixIndexBase</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> stateDot;</div>
<div class="line">}</div>
<div class="ttc" id="aaccess_8h_html_a897762bc9d770a93b04900046ac844b6"><div class="ttname"><a href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a></div><div class="ttdeci">static CAMunderscore _</div><div class="ttdef"><b>Definition:</b> <a href="access_8h_source.html#l00024">access.h:24</a></div></div>
<div class="ttc" id="abrett__test_8cpp_html_a49401ae49d5dbc64f0cb6dee4e832c90"><div class="ttname"><a href="brett__test_8cpp.html#a49401ae49d5dbc64f0cb6dee4e832c90">AttituteDynamics</a></div><div class="ttdeci">static Vector AttituteDynamics(const ssfTime &amp;_time, const Vector &amp;_integratingState, Orbit *_Orbit, Attitude *_Attitude, const Matrix &amp;_parameters, const Functor &amp;_forceFunctorPtr)</div><div class="ttdef"><b>Definition:</b> <a href="brett__test_8cpp_source.html#l00042">brett_test.cpp:42</a></div></div>
<div class="ttc" id="anamespaceO__SESSAME_html_a000a63f4c94249e5ffeb5adb102de817"><div class="ttname"><a href="namespaceO__SESSAME.html#a000a63f4c94249e5ffeb5adb102de817">O_SESSAME::skew</a></div><div class="ttdeci">Matrix skew(const Vector &amp;_inVector)</div><div class="ttdoc">Calculates the skew-symmetric matrix of a vector.</div><div class="ttdef"><b>Definition:</b> <a href="Matrix_8h_source.html#l00101">Matrix.h:101</a></div></div>
<div class="ttc" id="anamespaceO__SESSAME_html_a39124db042647a87f5c41ce772a502e6"><div class="ttname"><a href="namespaceO__SESSAME.html#a39124db042647a87f5c41ce772a502e6">O_SESSAME::norm2</a></div><div class="ttdeci">double norm2(const Vector &amp;_inVector)</div><div class="ttdoc">Calculates the 2-norm of the vector (square-root of the sum of the squares).</div><div class="ttdef"><b>Definition:</b> <a href="Matrix_8h_source.html#l00059">Matrix.h:59</a></div></div>
<div class="ttc" id="anamespaceO__SESSAME_html_a8f5c6aff4bb7124786e21a52f42b96e1"><div class="ttname"><a href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">O_SESSAME::VectorIndexBase</a></div><div class="ttdeci">const int VectorIndexBase</div><div class="ttdef"><b>Definition:</b> <a href="Matrix_8h_source.html#l00023">Matrix.h:23</a></div></div>
<div class="ttc" id="anamespaceO__SESSAME_html_aa03fb4f40ef9d7154a59fc366e35c768"><div class="ttname"><a href="namespaceO__SESSAME.html#aa03fb4f40ef9d7154a59fc366e35c768">O_SESSAME::MatrixIndexBase</a></div><div class="ttdeci">const int MatrixIndexBase</div><div class="ttdef"><b>Definition:</b> <a href="Matrix_8h_source.html#l00022">Matrix.h:22</a></div></div>
<div class="ttc" id="anamespaceO__SESSAME_html_abb55bd515fcc4eba59bad6cccc6707eb"><div class="ttname"><a href="namespaceO__SESSAME.html#abb55bd515fcc4eba59bad6cccc6707eb">O_SESSAME::eye</a></div><div class="ttdeci">Matrix eye(int _rowColumns)</div><div class="ttdoc">Creates an square identity matrix of specified size.</div><div class="ttdef"><b>Definition:</b> <a href="Matrix_8h_source.html#l00033">Matrix.h:33</a></div></div>
</div><!-- fragment --><p>Then setup the driver code to run the above dynamics equation: </p><div class="fragment"><div class="line"><span class="comment">// Setup an integrator and any special parameters</span></div>
<div class="line">RungeKuttaIntegrator myIntegrator; </div>
<div class="line">myIntegrator.SetNumSteps(1000);</div>
<div class="line"><span class="comment">// Integration times</span></div>
<div class="line">vector&lt;ssfTime&gt; integrationTimes;</div>
<div class="line">ssfTime begin(0);</div>
<div class="line">ssfTime end(begin + 50);</div>
<div class="line">integrationTimes.push_back(begin);</div>
<div class="line">integrationTimes.push_back(end);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create the initial attitude state</span></div>
<div class="line">AttitudeState myAttitudeState;</div>
<div class="line">myAttitudeState.SetRotation(Rotation(Quaternion(0,0,0,1)));</div>
<div class="line"><a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> initAngVelVector(3);</div>
<div class="line">    initAngVelVector(1) = 0;</div>
<div class="line">    initAngVelVector(2) = 0.1;</div>
<div class="line">    initAngVelVector(2) = -0.5;</div>
<div class="line">myAttitudeState.SetAngularVelocity(initAngVelVector);</div>
<div class="line">SpecificFunctor AttitudeForcesFunctor(&amp;<a class="code" href="brett__test_8cpp.html#a6f203242bcd2cc3fd0ed83afae1c226d">NullFunctor</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create the matrix of parameters needed for the RHS - MOI</span></div>
<div class="line"><a class="code" href="namespaceO__SESSAME.html#afd193cad95b9cf8e3be40032e29aeb48">Matrix</a> Parameters = <a class="code" href="namespaceO__SESSAME.html#abb55bd515fcc4eba59bad6cccc6707eb">eye</a>(3);</div>
<div class="line">    Parameters(1) = 100;</div>
<div class="line">    Parameters(2) = 300;</div>
<div class="line">    Parameters(3) = 150;</div>
<div class="line">    </div>
<div class="line"><span class="comment">// Integrate over the desired time interval</span></div>
<div class="line"><a class="code" href="namespaceO__SESSAME.html#afd193cad95b9cf8e3be40032e29aeb48">Matrix</a> history = myIntegrator.Integrate(</div>
<div class="line">                            integrationTimes,           <span class="comment">// seconds</span></div>
<div class="line">                            &amp;<a class="code" href="brett__test_8cpp.html#a49401ae49d5dbc64f0cb6dee4e832c90">AttituteDynamics</a>, </div>
<div class="line">                            myAttitudeState.GetState(),</div>
<div class="line">                            NULL,</div>
<div class="line">                            NULL,</div>
<div class="line">                            Parameters,</div>
<div class="line">                            AttitudeForcesFunctor</div>
<div class="line">                        );</div>
<div class="ttc" id="abrett__test_8cpp_html_a6f203242bcd2cc3fd0ed83afae1c226d"><div class="ttname"><a href="brett__test_8cpp.html#a6f203242bcd2cc3fd0ed83afae1c226d">NullFunctor</a></div><div class="ttdeci">Vector NullFunctor(const ssfTime &amp;_pSSFTime, const OrbitState &amp;_pOrbitState, const AttitudeState &amp;_pAttitudeState)</div><div class="ttdef"><b>Definition:</b> <a href="brett__test_8cpp_source.html#l00011">brett_test.cpp:11</a></div></div>
</div><!-- fragment --><ol type="1">
<li>Store the attitude to a text file. <div class="fragment"><div class="line">std::ofstreamofile;</div>
<div class="line">ofile.open(<span class="stringliteral">&quot;AttitudeHistory.dat&quot;</span>);</div>
<div class="line">ofile &lt;&lt; history;</div>
<div class="line">ofile.close();</div>
</div><!-- fragment --></li>
<li>Plot the attitude history using GnuPlot. <div class="fragment"><div class="line"><a class="code" href="namespaceO__SESSAME.html#afd193cad95b9cf8e3be40032e29aeb48">Matrix</a> plotting = history(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>,<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a class="code" href="namespaceO__SESSAME.html#aa03fb4f40ef9d7154a59fc366e35c768">MatrixIndexBase</a>,<a class="code" href="namespaceO__SESSAME.html#aa03fb4f40ef9d7154a59fc366e35c768">MatrixIndexBase</a>+4));</div>
<div class="line"><a class="code" href="namespaceO__SESSAME.html#acab87ab6b34e275d62fc7b0fe121826a">Plot2D</a>(plotting);</div>
</div><!-- fragment --></li>
<li>Store the attitude in DirectionCosineMatrix format in a MatLab file.</li>
</ol>
<p>Back to: <a class="el" href="TutorialsPage.html#AttitudeTutorials">Attitude Tutorials</a> </p><hr  />
<h1><a class="anchor" id="OrbitTutorialAnswer"></a>
Orbit Tutorial Answer</h1>
<p>Setup the dynamic equations: </p><div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> <a class="code" href="group__OrbitEquationsOfMotion.html#ga07306187c714baef87ad22b77fc06846">TwoBodyDynamics</a>(<span class="keyword">const</span> ssfTime &amp;_time, <span class="keyword">const</span> <a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a>&amp; _integratingState, Orbit *_Orbit, Attitude *_Attitude, <span class="keyword">const</span> <a class="code" href="namespaceO__SESSAME.html#afd193cad95b9cf8e3be40032e29aeb48">Matrix</a> &amp;_parameters, <span class="keyword">const</span> Functor &amp;_forceFunctorPtr)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> <a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> Forces(3);</div>
<div class="line">    <span class="keyword">static</span> <a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> Velocity(3);</div>
<div class="line">    <span class="keyword">static</span> <a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> stateDot(6);</div>
<div class="line">    <span class="keyword">static</span> AttitudeState tempAttState; <span class="comment">// don&#39;t need this except to pass an empty one if there is no attitude</span></div>
<div class="line">    <span class="keyword">static</span> OrbitState orbState(<span class="keyword">new</span> PositionVelocity);</div>
<div class="line"> </div>
<div class="line">    orbState.GetStateRepresentation()-&gt;SetPositionVelocity(_integratingState);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(_Attitude)</div>
<div class="line">        Forces = _forceFunctorPtr.Call(_time, orbState, _Attitude-&gt;GetStateObject());</div>
<div class="line">    <span class="keywordflow">else</span> </div>
<div class="line">        Forces = _forceFunctorPtr.Call(_time, orbState, tempAttState);</div>
<div class="line"> </div>
<div class="line">    Velocity(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>) = _integratingState(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+3,<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+5));</div>
<div class="line">    </div>
<div class="line"> </div>
<div class="line">    stateDot(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>, <a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+2)) = Velocity(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>);</div>
<div class="line">    stateDot(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+3, <a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+5)) = Forces(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>);</div>
<div class="line">    <span class="keywordflow">return</span> stateDot;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__OrbitEquationsOfMotion_html_ga07306187c714baef87ad22b77fc06846"><div class="ttname"><a href="group__OrbitEquationsOfMotion.html#ga07306187c714baef87ad22b77fc06846">TwoBodyDynamics</a></div><div class="ttdeci">static Vector TwoBodyDynamics(const ssfTime &amp;_time, const Vector &amp;_integratingState, Orbit *_pOrbit, Attitude *_pAttitude, const Matrix &amp;_parameters, const Functor &amp;_forceFunctorPtr)</div><div class="ttdoc">Orbit equation of motion using position and velocity.</div><div class="ttdef"><b>Definition:</b> <a href="TwoBodyDynamics_8h_source.html#l00071">TwoBodyDynamics.h:71</a></div></div>
</div><!-- fragment --><p> The force functions are setup as follows (using drag instead of solar radiation pressure): </p><div class="fragment"><div class="line"><a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> <a class="code" href="testOrbitIntegration_8cpp.html#ae01facad25fced4dbf526ea6a80079f4">OrbitForcesWithDragFunctor</a>(<span class="keyword">const</span> ssfTime&amp; _pSSFTime, <span class="keyword">const</span> OrbitState&amp; _pOrbitState, <span class="keyword">const</span> AttitudeState&amp; _pAttitudeState)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> Forces;</div>
<div class="line">    <a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> Position(3); Position(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>) = _pOrbitState.GetStateRepresentation()-&gt;GetPositionVelocity()(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>,<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+2));</div>
<div class="line">            </div>
<div class="line">    <span class="keywordtype">double</span> BC = 0.5;</div>
<div class="line">    <a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> Vrel(3); Vrel = _pOrbitState.GetStateRepresentation()-&gt;GetPositionVelocity()(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+3,<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+5));</div>
<div class="line">    <span class="keywordtype">double</span> Vrel_mag = <a class="code" href="namespaceO__SESSAME.html#a39124db042647a87f5c41ce772a502e6">norm2</a>(Vrel);</div>
<div class="line">    Forces = -398600.4418 / pow(<a class="code" href="namespaceO__SESSAME.html#a39124db042647a87f5c41ce772a502e6">norm2</a>(Position),3) * Position;</div>
<div class="line">    </div>
<div class="line">    Forces += -1/2 *1/BC * pow(Vrel_mag,2) * Vrel / Vrel_mag; </div>
<div class="line">    <span class="keywordflow">return</span> Forces;</div>
<div class="line">}</div>
<div class="ttc" id="atestOrbitIntegration_8cpp_html_ae01facad25fced4dbf526ea6a80079f4"><div class="ttname"><a href="testOrbitIntegration_8cpp.html#ae01facad25fced4dbf526ea6a80079f4">OrbitForcesWithDragFunctor</a></div><div class="ttdeci">Vector OrbitForcesWithDragFunctor(const ssfTime &amp;_pSSFTime, const OrbitState &amp;_pOrbitState, const AttitudeState &amp;_pAttitudeState)</div><div class="ttdef"><b>Definition:</b> <a href="testOrbitIntegration_8cpp_source.html#l00034">testOrbitIntegration.cpp:34</a></div></div>
</div><!-- fragment --><p>Finally create the driver program and call the integration: </p><div class="fragment"><div class="line"><span class="comment">// Setup an integrator and any special parameters</span></div>
<div class="line">RungeKuttaIntegrator myIntegrator; </div>
<div class="line">    <span class="keywordtype">int</span> numOrbits = 2;</div>
<div class="line">    <span class="keywordtype">int</span> numSteps = 100;</div>
<div class="line">myIntegrator.SetNumSteps(numSteps);</div>
<div class="line">    </div>
<div class="line">vector&lt;ssfTime&gt; integrationTimes;</div>
<div class="line">ssfTime begin(0);</div>
<div class="line">ssfTime end(begin + 92*60*numOrbits);</div>
<div class="line">integrationTimes.push_back(begin);</div>
<div class="line">integrationTimes.push_back(end);</div>
<div class="line">    </div>
<div class="line">OrbitState myOrbitState;</div>
<div class="line">myOrbitState.SetStateRepresentation(<span class="keyword">new</span> PositionVelocity);</div>
<div class="line">myOrbitState.SetOrbitFrame(<span class="keyword">new</span> <a class="code" href="classOrbitFrameIJK.html">OrbitFrameIJK</a>);</div>
<div class="line"><a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> initPV(6);</div>
<div class="line">    initPV(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+0) = -5776.6; <span class="comment">// km/s</span></div>
<div class="line">    initPV(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+1) = -157; <span class="comment">// km/s        </span></div>
<div class="line">    initPV(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+2) = 3496.9; <span class="comment">// km/s    </span></div>
<div class="line">    initPV(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+3) = -2.595;  <span class="comment">// km/s</span></div>
<div class="line">    initPV(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+4) = -5.651;  <span class="comment">// km/s        </span></div>
<div class="line">    initPV(<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+5) = -4.513; <span class="comment">// km/s</span></div>
<div class="line">myOrbitState.GetStateRepresentation()-&gt;SetPositionVelocity(initPV);</div>
<div class="line"> </div>
<div class="line"><a class="code" href="namespaceO__SESSAME.html#afd193cad95b9cf8e3be40032e29aeb48">Matrix</a> history = myIntegrator.Integrate(</div>
<div class="line">                            integrationTimes,           <span class="comment">// seconds</span></div>
<div class="line">                            &amp;<a class="code" href="group__OrbitEquationsOfMotion.html#ga07306187c714baef87ad22b77fc06846">TwoBodyDynamics</a>, </div>
<div class="line">                            <a class="code" href="MemoryTest_8cpp.html#af89770c8d38c741c62c74f1d94f435d9">myOrbit</a>.GetStateRepresentation()-&gt;GetPositionVelocity(),</div>
<div class="line">                            NULL,</div>
<div class="line">                            NULL,</div>
<div class="line">                            Parameters,</div>
<div class="line">                            <a class="code" href="testOrbitIntegration_8cpp.html#ae5137ebedc38741b0d25446878d681cf">OrbitForcesFunctor</a></div>
<div class="line">                        );</div>
<div class="ttc" id="aMemoryTest_8cpp_html_af89770c8d38c741c62c74f1d94f435d9"><div class="ttname"><a href="MemoryTest_8cpp.html#af89770c8d38c741c62c74f1d94f435d9">myOrbit</a></div><div class="ttdeci">static Orbit * myOrbit</div><div class="ttdef"><b>Definition:</b> <a href="MemoryTest_8cpp_source.html#l00030">MemoryTest.cpp:30</a></div></div>
<div class="ttc" id="aclassOrbitFrameIJK_html"><div class="ttname"><a href="classOrbitFrameIJK.html">OrbitFrameIJK</a></div><div class="ttdoc">Geocentric Orbit Coordinate System.</div><div class="ttdef"><b>Definition:</b> <a href="OrbitFrameIJK_8h_source.html#l00022">OrbitFrameIJK.h:23</a></div></div>
<div class="ttc" id="atestOrbitIntegration_8cpp_html_ae5137ebedc38741b0d25446878d681cf"><div class="ttname"><a href="testOrbitIntegration_8cpp.html#ae5137ebedc38741b0d25446878d681cf">OrbitForcesFunctor</a></div><div class="ttdeci">Vector OrbitForcesFunctor(const ssfTime &amp;_pSSFTime, const OrbitState &amp;_pOrbitState, const AttitudeState &amp;_pAttitudeState)</div><div class="ttdoc">Force function that will be called each timestep.</div><div class="ttdef"><b>Definition:</b> <a href="testOrbitIntegration_8cpp_source.html#l00026">testOrbitIntegration.cpp:26</a></div></div>
</div><!-- fragment --><ol type="1">
<li>Store the position and velocity to a text file. <div class="fragment"><div class="line">std::ofstreamofile;</div>
<div class="line">ofile.open(<span class="stringliteral">&quot;OrbitHistory.dat&quot;</span>);</div>
<div class="line">ofile &lt;&lt; history;</div>
<div class="line">ofile.close();</div>
</div><!-- fragment --></li>
<li>Plot the orbit position vector using GnuPlot. <div class="fragment"><div class="line"><span class="comment">// Create the plot using Columns 2:4</span></div>
<div class="line"><a class="code" href="namespaceO__SESSAME.html#afd193cad95b9cf8e3be40032e29aeb48">Matrix</a> orbitHistory = <a class="code" href="MemoryTest_8cpp.html#af89770c8d38c741c62c74f1d94f435d9">myOrbit</a>-&gt;GetHistory().GetHistory();</div>
<div class="line"><a class="code" href="namespaceO__SESSAME.html#afd193cad95b9cf8e3be40032e29aeb48">Matrix</a> orbitPlotting = orbitHistory(<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>,<a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(2,4));</div>
<div class="line"><a class="code" href="namespaceO__SESSAME.html#aff04983e7af068b71d72849c935ff376">Plot3D</a>(orbitPlotting);</div>
<div class="ttc" id="anamespaceO__SESSAME_html_aff04983e7af068b71d72849c935ff376"><div class="ttname"><a href="namespaceO__SESSAME.html#aff04983e7af068b71d72849c935ff376">O_SESSAME::Plot3D</a></div><div class="ttdeci">static void Plot3D(const Matrix &amp;_data)</div><div class="ttdef"><b>Definition:</b> <a href="Plot_8h_source.html#l00078">Plot.h:78</a></div></div>
</div><!-- fragment --> Here is a check for your answer (without solar radiation pressure): <pre class="fragment">[ time, r1, r2, r3, v1, v2, v3]
[ 5400, -5386.654,  562.845,  4034.074, -3.518027, -5.617977, -3.890888 ] 
</pre></li>
<li>Store the orbit Keplerian parameters in a MatLab file.</li>
</ol>
<p>Back to: <a class="el" href="TutorialsPage.html#OrbitTutorials">Orbit Tutorials</a></p>
<h1><a class="anchor" id="CoupledTutorialAnswer"></a>
Coupled Tutorial Answers</h1>
<ol type="1">
<li>Create an Environment object of the Earth using the above (Orbit &amp; Attitude) disturbance force &amp; torque functions.</li>
<li>Create a Propagator that will propagate the above Orbit &amp; Attitude objects and using the Environment object.<ul>
<li>Use a linear interpolator for the OrbitHistory.</li>
<li>Use loose coupling (orbit independent of attitude, but attitude dependent on position).</li>
</ul>
</li>
<li>Propagate the orbit and attitude for 2 orbits.</li>
<li>Plot the position and attitude using gnuplot.</li>
<li>Propagate another 2 orbits.</li>
<li>Add the new states to the previously made plots.</li>
</ol>
<p>Back to: <a class="el" href="TutorialsPage.html#CoupledTutorials">Coupled Attitude &amp; Orbit Tutorials</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
